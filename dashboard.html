<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAITHer: Bible Reader</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    
        body {
            background-color: #fff6ea;
            display: flex;
            min-height: 100vh;
        }
    
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, hsl(251, 90%, 21%) 0%, #190045 100%);
            color: white;
            padding: 30px 20px;
            height: 100vh;
            position: fixed;
            box-shadow: 2px 0 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
    
        .user-profile {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }

        .profile-pic {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            margin: 0 auto 15px;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .profile-pic span {
            font-size: 40px;
            color: #555;
        }

        .user-name {
            font-size: 1.2rem;
            margin: 5px 0;
            font-weight: 600;
        }

        .user-ministry {
            font-size: 0.85rem;
            opacity: 0.9;
            margin: 3px 0;
        }

        .nav-menu {
            list-style: none;
            margin-bottom: 20px;
            flex-grow: 1;
        }

        .nav-item {
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
        }

        .nav-item:hover {
            background-color: rgba(255,255,255,0.15);
        }

        .nav-item.active {
            background-color: rgba(255,255,255,0.25);
            font-weight: 500;
        }

        .nav-item i {
            margin-right: 10px;
            font-size: 1.1rem;
        }

        .bible-section {
            background-color: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .bible-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }

        .bible-option {
            padding: 8px 10px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }

        .bible-option i {
            margin-right: 8px;
            font-size: 0.9rem;
        }

        .bible-option:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .bible-option.active {
            background-color: rgba(255,255,255,0.2);
        }

        .bible-books {
            display: none;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .bible-books.show {
            display: flex;
        }

        .bible-book {
            padding: 8px 10px 8px 25px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            border-radius: 4px;
        }

        .bible-book:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .continue-reading {
            color: #FFEB3B;
            font-style: italic;
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 5px;
        }

        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 30px;
            background-color: #f5f7fa;
            overflow-y: auto;
            height: 100vh;
        }

        .content-header {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .chapters-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .chapter {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .chapter:hover {
            background-color: #f0f0f0;
            transform: translateY(-2px);
        }

        .verses-container {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 70px;
        }

        .bottom-navigation {
            position: fixed;
            bottom: 60px;
            left: 280px;
            right: 0;
            background: #f5f7fa;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 9;
        }

        .nav-button {
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .nav-button:hover {
            background-color: #1a252f;
        }

        .nav-button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }

        #current-chapter-bottom {
            margin: 0;
            text-align: center;
            flex-grow: 1;
        }

        .verse {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .verse-number {
            font-weight: bold;
            color: #2c3e50;
            margin-right: 5px;
        }

        .active-chapter {
            background-color: #2c3e50 !important;
            color: white;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
            font-style: italic;
        }

        .now-playing {
            position: fixed;
            bottom: 0;
            left: 280px;
            right: 0;
            background-color: #171a63;
            color: white;
            padding: 15px 25px;
            display: flex;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 10;
        }

        #profile-upload {
            display: none;
        }

        /* Calendar Styles */
        .calendar-container {
            display: flex;
            gap: 20px;
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .calendar-wrapper {
            flex: 1;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .calendar-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-nav-button {
            background: none;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-nav-button:hover {
            background-color: #f0f0f0;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            color: #2c3e50;
            padding: 5px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .calendar-day:hover {
            background-color: #f0f0f0;
        }

        .calendar-day.today {
            background-color: #e3f2fd;
            font-weight: 600;
        }

        .calendar-day.selected {
            background-color: #2c3e50;
            color: white;
        }

        .calendar-day.other-month {
            color: #aaa;
        }

        .calendar-events {
            flex: 1;
            margin-left: 20px;
            padding-left: 20px;
            border-left: 1px solid #eee;
        }
        
        .events-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .event-item {
            padding: 10px;
            border-left: 3px solid #2c3e50;
            background-color: #f9f9f9;
            margin-bottom: 10px;
            border-radius: 4px;
            position: relative;
        }

        .event-date {
            font-weight: 600;
            color: #2c3e50;
        }

        .event-title {
            margin: 5px 0;
            font-size: 1.05rem;
        }

        .event-details {
            font-size: 0.9rem;
            color: #666;
            display: flex;
            gap: 10px;
        }

        .event-detail {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .event-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        .event-action {
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            font-size: 0.9rem;
        }

        .event-action:hover {
            color: #2c3e50;
        }

        /* Add Event Button */
        .add-event-button {
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .add-event-button:hover {
            background-color: #1a252f;
        }

        /* Event Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
        }

        .event-modal {
            background-color: white;
            border-radius: 8px;
            width: 500px;
            max-width: 90%;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .btn-primary {
            background-color: #2c3e50;
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: #1a252f;
        }

        .btn-secondary {
            background-color: #f0f0f0;
            color: #333;
            border: none;
        }

        .btn-secondary:hover {
            background-color: #e0e0e0;
        }

        /* Event Indicator */
        .event-indicator {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #1a73e8;
            display: none;
        }

        .calendar-day.has-event .event-indicator {
            display: block;
        }

        /* Music Section Styles */
        #music-content {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: none; /* Initially hidden */
        }

        .music-player {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .player-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }

        .player-btn {
            background-color: #2c3e50;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .player-btn:hover {
            background-color: #1a252f;
            transform: scale(1.1);
        }

        .player-btn.play-btn {
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
        }

        .player-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .album-art {
            width: 200px;
            height: 200px;
            border-radius: 10px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .track-info {
            text-align: center;
        }

        .track-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .track-artist {
            font-size: 1.1rem;
            color: #666;
        }

        .progress-container {
            width: 100%;
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 3px;
            cursor: pointer;
            margin-bottom: 5px;
        }

        .progress {
            height: 100%;
            background-color: #1DB954;
            border-radius: 3px;
            width: 0%;
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
        }

        .playlist {
            margin-top: 30px;
        }

        .playlist-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .playlist-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 8px;
        }

        .playlist-item:hover {
            background-color: #f0f0f0;
        }

        .playlist-item.active {
            background-color: #e3f2fd;
        }

        .playlist-item-img {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            margin-right: 15px;
            object-fit: cover;
        }

        .playlist-item-info {
            flex: 1;
        }

        .playlist-item-title {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .playlist-item-artist {
            font-size: 0.9rem;
            color: #666;
        }

        .playlist-item-duration {
            font-size: 0.9rem;
            color: #666;
        }

        /* Volume Control */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .volume-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            background: #ddd;
            border-radius: 2px;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #1DB954;
            border-radius: 50%;
            cursor: pointer;
        }

        /* Music Categories */
        .music-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 8px 15px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .category-btn.active {
            background-color: #2c3e50;
            color: white;
        }

        @media (max-width: 992px) {
            .sidebar {
                width: 240px;
                padding: 25px 15px;
            }
            .main-content, .bottom-navigation, .now-playing {
                margin-left: 240px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
            }
            .main-content, .bottom-navigation, .now-playing {
                margin-left: 0;
            }
            body {
                flex-direction: column;
            }

            .bottom-navigation {
                bottom: 50px;
            }
            .calendar-container {
                flex-direction: column;
            }
            .calendar-events {
                margin-left: 0;
                padding-left: 0;
                border-left: none;
                border-top: 1px solid #eee;
                padding-top: 20px;
                margin-top: 20px;
            }
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .album-art {
                width: 150px;
                height: 150px;
            }
            
            .player-controls {
                gap: 15px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="user-profile">
            <label for="profile-upload" class="profile-upload-label">
                <div class="profile-pic">
                    <span>VA</span>
                </div>
            </label>
            <input type="file" id="profile-upload" accept="image/*">
            
            <div class="user-name">Venice Anne</div>
            <div class="user-ministry">Multimedia Ministry</div>
            <div class="user-ministry">CJCRSG Inc</div>
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item active" data-section="calendar"><i class="fas fa-calendar-alt"></i> Upcoming Events</li>
            <li class="nav-item" data-section="ministry"><i class="fas fa-users"></i> Ministry Section</li>
            <li class="nav-item" data-section="prayer"><i class="fas fa-pray"></i> Prayer List</li>
            <li class="nav-item" data-section="sermon"><i class="fas fa-bible"></i> Sermon Section</li>
            <li class="nav-item" data-section="gallery"><i class="fas fa-images"></i> Gallery Section</li>
            <li class="nav-item" data-section="music"><i class="fas fa-music"></i> Music Section</li>
            <li class="nav-item" data-section="settings"><i class="fas fa-cog"></i> Settings</li>
        </ul>
        
        <div class="bible-section">
            <div class="bible-options">
                <div class="bible-option" data-testament="old">
                    <i class="fas fa-scroll"></i> Old Testament
                </div>
                <div class="bible-option" data-testament="new">
                    <i class="fas fa-cross"></i> New Testament
                </div>
            </div>
            
            <div class="bible-books" id="old-testament-books"></div>
            <div class="bible-books" id="new-testament-books"></div>
            
            <div class="continue-reading">
                <span>Continue Reading</span>
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>
    </div>
    
    <!-- Main Content Area -->
    <div class="main-content">
        <div class="content-header" id="content-header">Upcoming Events</div>
        
        <!-- Calendar Content (initially visible) -->
        <div id="calendar-content" class="calendar-container">
            <div class="calendar-wrapper">
                <div class="calendar-header">
                    <div class="calendar-title" id="calendar-month-year">Month Year</div>
                    <div class="calendar-nav">
                        <button class="calendar-nav-button" id="prev-month"><i class="fas fa-chevron-left"></i></button>
                        <button class="calendar-nav-button" id="today">Today</button>
                        <button class="calendar-nav-button" id="next-month"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                
                <div class="calendar-grid" id="calendar-days-header">
                    <div class="calendar-day-header">Sun</div>
                    <div class="calendar-day-header">Mon</div>
                    <div class="calendar-day-header">Tue</div>
                    <div class="calendar-day-header">Wed</div>
                    <div class="calendar-day-header">Thu</div>
                    <div class="calendar-day-header">Fri</div>
                    <div class="calendar-day-header">Sat</div>
                </div>
                
                <div class="calendar-grid" id="calendar-days"></div>
            </div>
            
            <div class="calendar-events" id="calendar-events">
                <button class="add-event-button" id="add-event-button">
                    <i class="fas fa-plus"></i> Add Event
                </button>
                <h3 class="events-title">Upcoming Events</h3>
                <div id="events-list"></div>
            </div>
        </div>
        
        <!-- Bible Content (initially hidden) -->
        <div id="bible-content" style="display: none;">
            <p id="current-selection">Select a book from the Bible section to view its chapters.</p>
            <div class="chapters-container" id="chapters-container"></div>
            <div id="verses-container" class="verses-container"></div>
        </div>
        
        <!-- Music Content (initially hidden) -->
        <div id="music-content">
            <div class="music-player">
                <div class="music-categories">
                    <button class="category-btn active" data-category="worship">Worship</button>
                    <button class="category-btn" data-category="praise">Praise</button>
                    <button class="category-btn" data-category="hymns">Hymns</button>
                    <button class="category-btn" data-category="instrumental">Instrumental</button>
                </div>
                
                <div class="player-info">
                    <img src="https://i.scdn.co/image/ab67616d00001e02ff9ca10b55ce82ae553c8228" alt="Album Art" class="album-art">
                    <div class="track-info">
                        <div class="track-title">Build My Life</div>
                        <div class="track-artist">Housefires</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="time-info">
                        <span id="current-time">0:00</span>
                        <span id="duration">3:45</span>
                    </div>
                </div>
                
                <div class="player-controls">
                    <button class="player-btn" id="prev-btn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="player-btn play-btn" id="play-btn">
                        <i class="fas fa-play" id="play-icon"></i>
                    </button>
                    <button class="player-btn" id="next-btn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                
                <div class="volume-control">
                    <i class="fas fa-volume-down"></i>
                    <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="50">
                    <i class="fas fa-volume-up"></i>
                </div>
            </div>
            
            <div class="playlist">
                <h3 class="playlist-title">Worship Playlist</h3>
                <div id="playlist-items">
                    <!-- Playlist items will be added here dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-navigation" style="display: none;">
        <button id="prev-chapter-bottom" class="nav-button">
            <i class="fas fa-chevron-left"></i> Previous
        </button>
        <h3 id="current-chapter-bottom">Select a book</h3>
        <button id="next-chapter-bottom" class="nav-button">
            Next <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    
    <!-- Now Playing Bar -->
    <div class="now-playing">
        <div class="now-playing-icon"><i class="fas fa-play"></i></div>
        <div class="now-playing-text">Now Playing: Build My Life</div>
    </div>

    <!-- Event Modal -->
    <div class="modal-overlay" id="event-modal">
        <div class="event-modal">
            <div class="modal-header">
                <h3 class="modal-title">Add New Event</h3>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="event-title">Event Title</label>
                    <input type="text" id="event-title" class="form-control" placeholder="Enter event title">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="event-date">Date</label>
                        <input type="date" id="event-date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="event-time">Time</label>
                        <input type="time" id="event-time" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="event-location">Location</label>
                    <input type="text" id="event-location" class="form-control" placeholder="Enter location">
                </div>
                <div class="form-group">
                    <label for="event-description">Description (Optional)</label>
                    <textarea id="event-description" class="form-control" rows="3" placeholder="Enter description"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-event">Cancel</button>
                <button class="btn btn-primary" id="save-event">Save Event</button>
            </div>
        </div>
    </div>

    <script>
        // Complete Bible data
        const bibleData = {
            oldTestament: [
                {name: "Genesis", chapters: 50},
                {name: "Exodus", chapters: 40},
                {name: "Leviticus", chapters: 27},
                {name: "Numbers", chapters: 36},
                {name: "Deuteronomy", chapters: 34},
                {name: "Joshua", chapters: 24},
                {name: "Judges", chapters: 21},
                {name: "Ruth", chapters: 4},
                {name: "1 Samuel", chapters: 31},
                {name: "2 Samuel", chapters: 24},
                {name: "1 Kings", chapters: 22},
                {name: "2 Kings", chapters: 25},
                {name: "1 Chronicles", chapters: 29},
                {name: "2 Chronicles", chapters: 36},
                {name: "Ezra", chapters: 10},
                {name: "Nehemiah", chapters: 13},
                {name: "Esther", chapters: 10},
                {name: "Job", chapters: 42},
                {name: "Psalms", chapters: 150},
                {name: "Proverbs", chapters: 31},
                {name: "Ecclesiastes", chapters: 12},
                {name: "Song of Solomon", chapters: 8},
                {name: "Isaiah", chapters: 66},
                {name: "Jeremiah", chapters: 52},
                {name: "Lamentations", chapters: 5},
                {name: "Ezekiel", chapters: 48},
                {name: "Daniel", chapters: 12},
                {name: "Hosea", chapters: 14},
                {name: "Joel", chapters: 3},
                {name: "Amos", chapters: 9},
                {name: "Obadiah", chapters: 1},
                {name: "Jonah", chapters: 4},
                {name: "Micah", chapters: 7},
                {name: "Nahum", chapters: 3},
                {name: "Habakkuk", chapters: 3},
                {name: "Zephaniah", chapters: 3},
                {name: "Haggai", chapters: 2},
                {name: "Zechariah", chapters: 14},
                {name: "Malachi", chapters: 4}
            ],
            newTestament: [
                {name: "Matthew", chapters: 28},
                {name: "Mark", chapters: 16},
                {name: "Luke", chapters: 24},
                {name: "John", chapters: 21},
                {name: "Acts", chapters: 28},
                {name: "Romans", chapters: 16},
                {name: "1 Corinthians", chapters: 16},
                {name: "2 Corinthians", chapters: 13},
                {name: "Galatians", chapters: 6},
                {name: "Ephesians", chapters: 6},
                {name: "Philippians", chapters: 4},
                {name: "Colossians", chapters: 4},
                {name: "1 Thessalonians", chapters: 5},
                {name: "2 Thessalonians", chapters: 3},
                {name: "1 Timothy", chapters: 6},
                {name: "2 Timothy", chapters: 4},
                {name: "Titus", chapters: 3},
                {name: "Philemon", chapters: 1},
                {name: "Hebrews", chapters: 13},
                {name: "James", chapters: 5},
                {name: "1 Peter", chapters: 5},
                {name: "2 Peter", chapters: 3},
                {name: "1 John", chapters: 5},
                {name: "2 John", chapters: 1},
                {name: "3 John", chapters: 1},
                {name: "Jude", chapters: 1},
                {name: "Revelation", chapters: 22}
            ]
        };

        // Music data
        const musicData = {
            worship: [
                {
                    title: "Build My Life",
                    artist: "Housefires",
                    duration: "3:45",
                    cover: "https://i.scdn.co/image/ab67616d00001e02ff9ca10b55ce82ae553c8228",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                },
                {
                    title: "What A Beautiful Name",
                    artist: "Hillsong Worship",
                    duration: "4:18",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a2",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
                },
                {
                    title: "Goodness of God",
                    artist: "Bethel Music",
                    duration: "4:56",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a3",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"
                },
                {
                    title: "10,000 Reasons (Bless the Lord)",
                    artist: "Matt Redman",
                    duration: "5:42",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a4",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"
                }
            ],
            praise: [
                {
                    title: "This Is Amazing Grace",
                    artist: "Phil Wickham",
                    duration: "4:39",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a5",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"
                },
                {
                    title: "Great Are You Lord",
                    artist: "All Sons & Daughters",
                    duration: "4:58",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a6",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"
                },
                {
                    title: "Reckless Love",
                    artist: "Cory Asbury",
                    duration: "5:33",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a7",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3"
                }
            ],
            hymns: [
                {
                    title: "Amazing Grace",
                    artist: "Traditional",
                    duration: "4:12",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a8",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3"
                },
                {
                    title: "How Great Thou Art",
                    artist: "Traditional",
                    duration: "5:15",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2a9",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3"
                },
                {
                    title: "It Is Well With My Soul",
                    artist: "Traditional",
                    duration: "4:38",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2b0",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3"
                }
            ],
            instrumental: [
                {
                    title: "Peaceful Piano",
                    artist: "Instrumental Worship",
                    duration: "6:22",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2b1",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-11.mp3"
                },
                {
                    title: "Calming Strings",
                    artist: "Instrumental Worship",
                    duration: "5:45",
                    cover: "https://i.scdn.co/image/ab67616d00001e02c7e2f7c2a2c9c2c2f2d7c2b2",
                    audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3"
                }
            ]
        };

        // State management
        let currentBook = null;
        let currentChapter = 1;
        let currentDate = new Date();
        let selectedDate = new Date();
        let events = [];
        let currentMusicCategory = 'worship';
        let currentTrackIndex = 0;
        let isPlaying = false;
        let audioPlayer = new Audio();
        let currentPlaylist = [];

        // Initialize the app
        function initializeApp() {
            initializeBibleBooks();
            setupEventListeners();
            renderCalendar();
            setupCalendarNavigation();
            initializeMusicPlayer();
            toggleContent('calendar'); // Start with calendar visible
            
            // Load events from localStorage if available
            const savedEvents = localStorage.getItem('calendarEvents');
            if (savedEvents) {
                events = JSON.parse(savedEvents);
                // Convert string dates back to Date objects
                events = events.map(event => ({
                    ...event,
                    date: new Date(event.date)
                }));
            }
        }

        // Initialize Music Player
        function initializeMusicPlayer() {
            // Set up playlist for the default category
            currentPlaylist = musicData.worship;
            renderPlaylist();
            
            // Set up audio player event listeners
            audioPlayer.addEventListener('timeupdate', updateProgressBar);
            audioPlayer.addEventListener('ended', playNextTrack);
            audioPlayer.addEventListener('loadedmetadata', updateDurationDisplay);
            
            // Set initial volume
            audioPlayer.volume = document.getElementById('volume-slider').value / 100;
        }

        function renderPlaylist() {
            const playlistContainer = document.getElementById('playlist-items');
            playlistContainer.innerHTML = '';
            
            currentPlaylist.forEach((track, index) => {
                const playlistItem = document.createElement('div');
                playlistItem.className = `playlist-item ${index === currentTrackIndex ? 'active' : ''}`;
                playlistItem.dataset.index = index;
                
                playlistItem.innerHTML = `
                    <img src="${track.cover}" alt="${track.title}" class="playlist-item-img">
                    <div class="playlist-item-info">
                        <div class="playlist-item-title">${track.title}</div>
                        <div class="playlist-item-artist">${track.artist}</div>
                    </div>
                    <div class="playlist-item-duration">${track.duration}</div>
                `;
                
                playlistItem.addEventListener('click', () => {
                    playTrack(index);
                });
                
                playlistContainer.appendChild(playlistItem);
            });
        }

        function playTrack(index) {
            currentTrackIndex = index;
            const track = currentPlaylist[index];
            
            // Update UI
            document.querySelector('.playlist-item.active')?.classList.remove('active');
            document.querySelector(`.playlist-item[data-index="${index}"]`).classList.add('active');
            document.querySelector('.album-art').src = track.cover;
            document.querySelector('.track-title').textContent = track.title;
            document.querySelector('.track-artist').textContent = track.artist;
            document.querySelector('.now-playing-text').textContent = `Now Playing: ${track.title}`;
            
            // Set audio source and play
            audioPlayer.src = track.audio;
            audioPlayer.play();
            isPlaying = true;
            
            // Update play/pause button
            document.getElementById('play-icon').className = 'fas fa-pause';
        }

        function togglePlayPause() {
            if (audioPlayer.paused) {
                if (audioPlayer.src) {
                    audioPlayer.play();
                } else {
                    playTrack(0);
                }
                isPlaying = true;
                document.getElementById('play-icon').className = 'fas fa-pause';
            } else {
                audioPlayer.pause();
                isPlaying = false;
                document.getElementById('play-icon').className = 'fas fa-play';
            }
        }

        function playNextTrack() {
            const nextIndex = (currentTrackIndex + 1) % currentPlaylist.length;
            playTrack(nextIndex);
        }

        function playPreviousTrack() {
            const prevIndex = (currentTrackIndex - 1 + currentPlaylist.length) % currentPlaylist.length;
            playTrack(prevIndex);
        }

        function updateProgressBar() {
            const progressBar = document.getElementById('progress');
            const currentTimeDisplay = document.getElementById('current-time');
            
            const currentTime = audioPlayer.currentTime;
            const duration = audioPlayer.duration;
            const progressPercent = (currentTime / duration) * 100;
            
            progressBar.style.width = `${progressPercent}%`;
            
            // Update time display
            currentTimeDisplay.textContent = formatTime(currentTime);
        }

        function updateDurationDisplay() {
            const durationDisplay = document.getElementById('duration');
            durationDisplay.textContent = formatTime(audioPlayer.duration);
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
        }

        function setVolume() {
            audioPlayer.volume = this.value / 100;
        }

        function changeMusicCategory(category) {
            currentMusicCategory = category;
            currentPlaylist = musicData[category];
            currentTrackIndex = 0;
            renderPlaylist();
            
            // Update active category button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.category === category);
            });
        }

        // Initialize Bible books in sidebar
        function initializeBibleBooks() {
            const oldTestamentContainer = document.getElementById('old-testament-books');
            const newTestamentContainer = document.getElementById('new-testament-books');
            
            bibleData.oldTestament.forEach(book => {
                addBookElement(book, oldTestamentContainer);
            });
            
            bibleData.newTestament.forEach(book => {
                addBookElement(book, newTestamentContainer);
            });
        }

        function addBookElement(book, container) {
            const bookElement = document.createElement('div');
            bookElement.className = 'bible-book';
            bookElement.textContent = book.name;
            bookElement.addEventListener('click', () => {
                toggleContent('bible');
                currentBook = book;
                currentChapter = 1;
                showChapters(book);
            });
            container.appendChild(bookElement);
        }

        // Show chapters for selected book
        function showChapters(book) {
            document.getElementById('current-chapter-bottom').textContent = `${book.name} ${currentChapter}`;
            document.getElementById('current-selection').textContent = `Chapters of ${book.name}:`;
            
            const chaptersContainer = document.getElementById('chapters-container');
            chaptersContainer.innerHTML = '';
            
            for (let i = 1; i <= book.chapters; i++) {
                const chapterElement = document.createElement('div');
                chapterElement.className = `chapter ${i === currentChapter ? 'active-chapter' : ''}`;
                chapterElement.textContent = i;
                chapterElement.addEventListener('click', () => {
                    currentChapter = i;
                    showVerses(book.name, i);
                });
                chaptersContainer.appendChild(chapterElement);
            }
            
            updateNavigationButtons();
            document.querySelector('.bottom-navigation').style.display = 'flex';
        }

        // Show verses for selected chapter
        async function showVerses(bookName, chapter) {
            const versesContainer = document.getElementById('verses-container');
            versesContainer.innerHTML = '<div class="loading">Loading verses...</div>';
            
            try {
                let formattedBookName = bookName.replace(/\s+/g, '');
                if (bookName.includes('1 ') || bookName.includes('2 ') || bookName.includes('3 ')) {
                    formattedBookName = bookName.replace(' ', '');
                }
                
                const response = await fetch(`https://bible-api.com/${formattedBookName}+${chapter}?translation=kjv`);
                const data = await response.json();
                
                versesContainer.innerHTML = '';
                
                if (data.verses?.length > 0) {
                    data.verses.forEach(verse => {
                        const verseElement = document.createElement('div');
                        verseElement.className = 'verse';
                        verseElement.innerHTML = `
                            <span class="verse-number">${verse.verse}</span>
                            <span class="verse-text">${verse.text}</span>
                        `;
                        versesContainer.appendChild(verseElement);
                    });
                } else {
                    showNoVersesMessage(bookName, chapter);
                }
            } catch (error) {
                console.error('Error fetching verses:', error);
                showNoVersesMessage(bookName, chapter);
            }
            
            document.getElementById('current-chapter-bottom').textContent = `${bookName} ${chapter}`;
            updateNavigationButtons();
        }

        function showNoVersesMessage(bookName, chapter) {
            const versesContainer = document.getElementById('verses-container');
            versesContainer.innerHTML = `
                <div class="verse">
                    <p>Verses not available for ${bookName} ${chapter}.</p>
                    <p>Please check your internet connection.</p>
                </div>
            `;
        }

        function updateNavigationButtons() {
            if (!currentBook) return;
            
            const prevButton = document.getElementById('prev-chapter-bottom');
            const nextButton = document.getElementById('next-chapter-bottom');
            prevButton.disabled = currentChapter <= 1;
            nextButton.disabled = currentChapter >= currentBook.chapters;
        }

        function setupEventListeners() {
            // Navigation buttons
            document.getElementById('prev-chapter-bottom').addEventListener('click', () => {
                if (currentChapter > 1 && currentBook) {
                    currentChapter--;
                    showVerses(currentBook.name, currentChapter);
                }
            });

            document.getElementById('next-chapter-bottom').addEventListener('click', () => {
                if (currentBook && currentChapter < currentBook.chapters) {
                    currentChapter++;
                    showVerses(currentBook.name, currentChapter);
                }
            });

            // Bible testament options
            document.querySelectorAll('.bible-option').forEach(option => {
                option.addEventListener('click', function() {
                    const testament = this.dataset.testament;
                    const otherTestament = testament === 'old' ? 'new' : 'old';
                    
                    this.classList.toggle('active');
                    document.querySelector(`.bible-option[data-testament="${otherTestament}"]`).classList.remove('active');
                    
                    document.getElementById(`${testament}-testament-books`).classList.toggle('show');
                    document.getElementById(`${otherTestament}-testament-books`).classList.remove('show');
                });
            });

            // Continue reading
            document.querySelector('.continue-reading').addEventListener('click', () => {
                if (currentBook) {
                    toggleContent('bible');
                    showVerses(currentBook.name, currentChapter);
                }
            });

            // Profile upload
            document.getElementById('profile-upload').addEventListener('change', function(e) {
                if (e.target.files?.[0]) {
                    const reader = new FileReader();
                    const profilePic = document.querySelector('.profile-pic');
                    
                    reader.onload = function(event) {
                        const span = profilePic.querySelector('span');
                        if (span) profilePic.removeChild(span);
                        
                        let img = profilePic.querySelector('img') || new Image();
                        img.src = event.target.result;
                        img.style.width = '100%';
                        img.style.height = '100%';
                        img.style.objectFit = 'cover';
                        profilePic.appendChild(img);
                    }
                    
                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // Nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    const section = this.getAttribute('data-section');
                    toggleContent(section);
                    document.getElementById('content-header').textContent = this.textContent.trim();
                });
            });

            // Event modal
            document.getElementById('add-event-button').addEventListener('click', () => {
                openEventModal();
            });

            document.getElementById('close-modal').addEventListener('click', closeEventModal);
            document.getElementById('cancel-event').addEventListener('click', closeEventModal);
            document.getElementById('save-event').addEventListener('click', saveEvent);

            // Music player controls
            document.getElementById('play-btn').addEventListener('click', togglePlayPause);
            document.getElementById('prev-btn').addEventListener('click', playPreviousTrack);
            document.getElementById('next-btn').addEventListener('click', playNextTrack);
            
            // Progress bar click
            document.querySelector('.progress-bar').addEventListener('click', setProgress);
            
            // Volume control
            document.getElementById('volume-slider').addEventListener('input', setVolume);
            
            // Music category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    changeMusicCategory(btn.dataset.category);
                });
            });
        }

        // Calendar functionality
        function renderCalendar() {
            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';
            
            const monthYear = document.getElementById('calendar-month-year');
            monthYear.textContent = `${currentDate.toLocaleString('default', { month: 'long' })} ${currentDate.getFullYear()}`;
            
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            
            const prevLastDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 0).getDate();
            const firstDayIndex = firstDay.getDay();
            const daysInMonth = lastDay.getDate();
            
            // Previous month days
            for (let i = firstDayIndex; i > 0; i--) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.textContent = prevLastDay - i + 1;
                
                // Add event indicator
                const indicator = document.createElement('div');
                indicator.className = 'event-indicator';
                dayElement.appendChild(indicator);
                
                calendarDays.appendChild(dayElement);
            }
            
            // Current month days
            for (let i = 1; i <= daysInMonth; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = i;
                
                // Add event indicator
                const indicator = document.createElement('div');
                indicator.className = 'event-indicator';
                dayElement.appendChild(indicator);
                
                // Check if this date has any events
                const dateHasEvent = events.some(event => {
                    const eventDate = new Date(event.date);
                    return (
                        eventDate.getDate() === i && 
                        eventDate.getMonth() === currentDate.getMonth() && 
                        eventDate.getFullYear() === currentDate.getFullYear()
                    );
                });
                
                if (dateHasEvent) {
                    dayElement.classList.add('has-event');
                }
                
                // Check if this is today
                const today = new Date();
                if (currentDate.getFullYear() === today.getFullYear() && 
                    currentDate.getMonth() === today.getMonth() && 
                    i === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                // Check if this is selected date
                if (currentDate.getFullYear() === selectedDate.getFullYear() && 
                    currentDate.getMonth() === selectedDate.getMonth() && 
                    i === selectedDate.getDate()) {
                    dayElement.classList.add('selected');
                }
                
                dayElement.addEventListener('click', () => {
                    selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), i);
                    renderCalendar();
                    renderEvents();
                });
                
                calendarDays.appendChild(dayElement);
            }
            
            // Calculate how many days we need from next month
            const totalDaysShown = firstDayIndex + daysInMonth;
            const rowsNeeded = Math.ceil(totalDaysShown / 7);
            const nextMonthDays = rowsNeeded * 7 - totalDaysShown;
            
            // Next month days
            for (let i = 1; i <= nextMonthDays; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.textContent = i;
                
                // Add event indicator
                const indicator = document.createElement('div');
                indicator.className = 'event-indicator';
                dayElement.appendChild(indicator);
                
                calendarDays.appendChild(dayElement);
            }
            
            renderEvents();
        }

        function renderEvents() {
            const eventsList = document.getElementById('events-list');
            eventsList.innerHTML = '';
            
            // Filter events for the selected date
            const dayEvents = events.filter(event => {
                const eventDate = new Date(event.date);
                return (
                    eventDate.getDate() === selectedDate.getDate() && 
                    eventDate.getMonth() === selectedDate.getMonth() && 
                    eventDate.getFullYear() === selectedDate.getFullYear()
                );
            });
            
            if (dayEvents.length === 0) {
                eventsList.innerHTML = '<p>No events scheduled for this day.</p>';
            } else {
                dayEvents.forEach((event, index) => {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'event-item';
                    
                    const timeString = event.time ? formatTime(event.time) : 'All day';
                    
                    eventElement.innerHTML = `
                        <div class="event-date">${event.date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}</div>
                        <div class="event-title">${event.title}</div>
                        <div class="event-details">
                            <div class="event-detail">
                                <i class="fas fa-clock"></i> ${timeString}
                            </div>
                            ${event.location ? `<div class="event-detail">
                                <i class="fas fa-map-marker-alt"></i> ${event.location}
                            </div>` : ''}
                        </div>
                        <div class="event-actions">
                            <button class="event-action" data-index="${index}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="event-action" data-index="${index}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    
                    // Add event listeners for edit and delete buttons
                    const editBtn = eventElement.querySelector('.event-actions button:nth-child(1)');
                    const deleteBtn = eventElement.querySelector('.event-actions button:nth-child(2)');
                    
                    editBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        editEvent(index);
                    });
                    
                    deleteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        deleteEvent(index);
                    });
                    
                    eventsList.appendChild(eventElement);
                });
            }
        }

        function formatTime(timeString) {
            if (!timeString) return '';
            
            const [hours, minutes] = timeString.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const hour12 = hour % 12 || 12;
            
            return `${hour12}:${minutes} ${ampm}`;
        }

        function setupCalendarNavigation() {
            document.getElementById('prev-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });
            
            document.getElementById('today').addEventListener('click', () => {
                currentDate = new Date();
                selectedDate = new Date();
                renderCalendar();
            });
        }

        function toggleContent(section) {
            // Hide all content sections first
            document.getElementById('calendar-content').style.display = 'none';
            document.getElementById('bible-content').style.display = 'none';
            document.getElementById('music-content').style.display = 'none';
            document.querySelector('.bottom-navigation').style.display = 'none';
            
            // Show the requested section
            if (section === 'calendar') {
                document.getElementById('calendar-content').style.display = 'flex';
            } else if (section === 'bible') {
                document.getElementById('bible-content').style.display = 'block';
                if (currentBook) {
                    document.querySelector('.bottom-navigation').style.display = 'flex';
                }
            } else if (section === 'music') {
                document.getElementById('music-content').style.display = 'block';
            }
        }

        // Event Modal Functions
        function openEventModal(eventToEdit = null) {
            const modal = document.getElementById('event-modal');
            const titleInput = document.getElementById('event-title');
            const dateInput = document.getElementById('event-date');
            const timeInput = document.getElementById('event-time');
            const locationInput = document.getElementById('event-location');
            const descriptionInput = document.getElementById('event-description');
            
            if (eventToEdit) {
                // Editing an existing event
                document.querySelector('.modal-title').textContent = 'Edit Event';
                titleInput.value = eventToEdit.title;
                dateInput.value = formatDateForInput(eventToEdit.date);
                timeInput.value = eventToEdit.time || '';
                locationInput.value = eventToEdit.location || '';
                descriptionInput.value = eventToEdit.description || '';
                
                // Store the index of the event being edited
                modal.dataset.editIndex = eventToEdit.index;
            } else {
                // Adding a new event
                document.querySelector('.modal-title').textContent = 'Add New Event';
                titleInput.value = '';
                dateInput.value = formatDateForInput(selectedDate);
                timeInput.value = '12:00';
                locationInput.value = '';
                descriptionInput.value = '';
                
                // Remove any edit index
                delete modal.dataset.editIndex;
            }
            
            modal.style.display = 'flex';
        }

        function closeEventModal() {
            document.getElementById('event-modal').style.display = 'none';
        }

        function formatDateForInput(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function saveEvent() {
            const modal = document.getElementById('event-modal');
            const title = document.getElementById('event-title').value.trim();
            const date = document.getElementById('event-date').value;
            const time = document.getElementById('event-time').value;
            const location = document.getElementById('event-location').value.trim();
            const description = document.getElementById('event-description').value.trim();
            
            if (!title) {
                alert('Please enter an event title');
                return;
            }
            
            if (!date) {
                alert('Please select a date');
                return;
            }
            
            const eventDate = new Date(date);
            if (time) {
                const [hours, minutes] = time.split(':');
                eventDate.setHours(parseInt(hours));
                eventDate.setMinutes(parseInt(minutes));
            }
            
            const newEvent = {
                title,
                date: eventDate,
                time: time || null,
                location: location || null,
                description: description || null
            };
            
            if (modal.dataset.editIndex !== undefined) {
                // Update existing event
                const index = parseInt(modal.dataset.editIndex);
                events[index] = newEvent;
            } else {
                // Add new event
                events.push(newEvent);
            }
            
            // Sort events by date
            events.sort((a, b) => a.date - b.date);
            
            // Save to localStorage
            localStorage.setItem('calendarEvents', JSON.stringify(events));
            
            closeEventModal();
            renderCalendar();
        }

        function editEvent(index) {
            const eventToEdit = {
                ...events[index],
                index
            };
            openEventModal(eventToEdit);
        }

        function deleteEvent(index) {
            if (confirm('Are you sure you want to delete this event?')) {
                events.splice(index, 1);
                localStorage.setItem('calendarEvents', JSON.stringify(events));
                renderCalendar();
            }
        }

        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>